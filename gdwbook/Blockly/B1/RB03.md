# RB03 流水灯和选择结构

## 课程概述

- 课程名称：见标题
- 课程时长：40 分钟 × 2
- 课程内容：流水灯的实现，用选择（条件）来实现判断逻辑
- 学生群体：3~6 年级

```plain
本课内容参考来源： 
1. 《树莓派初级课程V1（吴俊杰老师18课时）》第 3 课
2. 课件 1.0 初级 1，第 03 课 
3. 酌情增删内容
```

## 教学目标

### 考察点

1. 程序结构：顺序、循环、选择
2. 制作流水灯
3. 变量的概念

### 知识与技能

- 顺序结构
- 循环结构
- 选择结构
- 变量
- 流水灯、跑马灯等灯光效果
- LED、杜邦线、GPIO
- 红外传感器的简单使用 

### 情感价值和学科交叉

*(略)*

### 难点和注意事项

*(略)*

## 教学准备

- 按教学准备基础要求进行准备
- 其它：检查足够 LED 灯；母母、公母杜邦线各四对以上

## 课堂教学活动

### 暖场（10分钟）

活跃气氛，复习上节课内容，引入本节课主题。

复习：

- 如何点亮小灯
- 程序有哪几种结构？
- 什么是循环？

### 课堂讲解：流水灯和选择结构 （40分钟）

**教学提纲：**

- 前篇
  - 简单流水灯实现
  - 带参数的循环和选择
- 后篇
  - 简单红外控制小灯
  - 跑马灯实现，多个 GPIO 连接
- 扩展内容 *（根据学生程度酌情加入，不影响主线课程进度）*
  - 扩展任务：使用红外传感器控制流水灯方向。

**授课内容**：

详见下文“讲义”部分。

### 巩固练习和作业（20 分钟）

扩展练习和作业。以下练习非主线任务，可根据整体或个别学生学习情况酌情选择。可分为2~3人小组进行讨论合作：

- 试试看灯可不可以来回流动
- 试试看可不可以六个或8个小灯一起流动
- 可否试着实现7彩变换流水灯
- 试试看让灯绕圈流动
- 还有没有其他灯光效果？

### 总结与点评（10分钟）

*(回顾课程知识点，根据情况提问。如果有学生作品，邀请学生上台演示、讲解。)*

巩固练习让学生自由发挥制作各种灯光效果，可上台展示，说明思路。

思考题：

- 什么是流水灯？
- 循环和选择结构的作用？
- 什么是变量？为什么要使用变量？
- 怎样输出调试信息？调试信息的作用是什么？

## 讲义

*(完整授课内容和补充知识)*

### 任务一：简单的流水灯实现

<div align="center">
    <img src="/media/15572937619930.jpg">
</div>

注意循环体的设计。如果循环体最后一条指令是亮灯，那么还需要在循环外追加一条灭灯指令。

### 拓展任务：带参数循环和选择

引入选择结构。本任务内容参见 [RB02 拓展任务：带参数循环和选择](RB02.md#拓展任务：使用带参数循环及选择语句)

### 拓展任务：简单的红外检测

红外传感器相对简单，从第二课开始即可加入，并在 2、3、4 课反复使用。
后续会有单独一节课讲解红外及光敏传感器，届时学生应已对红外传感器的基本使用有一定程度的掌握，则继续进行较深入的应用和原理讲授。

本节第一次引入红外传感器，主要目的是学习选择结构和基本的调试信息输出。

<div align="center">
    <img src="/media/15573843317920.jpg">
</div>

注意在循环中等待的作用，检测红外结果的位置等等。学生容易出现的错误是用条件循环，当检测到红外信号时执行循环体。这样实际上会导致循环不执行。该情况可以于适当时机讲解。

建议使用限定次数的循环，无限循环和逻辑变量后续说明。

什么是调试信息？
调试信息就是程序运行过程中的信息
如：变量的取值（传感器的检测结果）

输出调试信息的作用？
我们通过这个“窗口”来观察：从而来判断我们的程序是否出错；是否符合预期。

在程序结束的地方输出“程序结束”，提示我们程序是否在执行或者已经完成。

扩展任务：使用红外传感器控制流水灯方向。

### 任务二：跑马灯

与流水灯不同，跑马灯依次点亮所有LED灯，然后从终点的LED灯逐渐熄灭。

杜邦线可以用来延长扩展板上的插槽。扩展板上所有带数字的插口都是 GPIO，都可以用来接小灯。只要将 GPIO 接二极管正极，二极管的另一端接地即可。

这里引入变量的概念，当多处需要用同一个数值时，如果要改变数值的大小，就可以用变量来简化。

<div align="center">
    <img src="/media/15572959140034.jpg">
</div>

创建一个新的变量，赋值为希望的时间，然后用这个变量来取代之前等待积木中指定的数字。

<div align="center">
    <img src="/media/15572961928828.jpg">
</div>

这样，如果想改变小灯亮灭的速度，只需要在一处做更改，避免了多次操作。这是变量的作用之一。

## 课件

根据本教学计划和讲义，以及具体授课对象编写。

文件名应为：

`RB03-流水灯和选择结构.pptx`

