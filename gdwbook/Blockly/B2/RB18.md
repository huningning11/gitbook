# RB18 文字识别

## 课程概述

- 课程名称：见标题
- 课程时长：40 分钟 × 2
- 课程内容：学习摄像头的使用和文字识别模块
- 学生群体：3~6 年级

```plain
本课内容参考了如下资料：
1. 内容来源一：《树莓派初级课程V1（吴俊杰老师18课时）》第 11 课
2. 内容来源二：下沙青少年宫第三期第七课
```

## 教学目标

### 考察点

- 能够连接并控制摄像头拍照
- 能够调用文字识别模块识别图像中的文字

### 知识与技能

- 摄像头连接
- 按钮状态检测

### 情感价值和学科交叉

18、19 两节课结合文字识别、车牌识别，可以模拟智能停车场。生活中非常常见的应用，在课堂上可以接近完整的演示，会带来很大的成就感。

### 难点和注意事项

- 树莓派摄像头连接操作比较精细，需要强调小心操作
- 文字识别准确度依赖于焦距、文字清晰度和书写规范程度。如果使用不可调焦的摄像头，建议事先测试好最佳距离。

## 教学准备

- 按教学准备基础要求进行准备
- 教学材料：
    - 树莓派专用摄像头
    - 按钮开关
    - 预先准备一些“一定能”识别的字条
    - 供演示的作品

## 课堂教学活动

### 暖场（5分钟）

活跃气氛，复习上节课内容，引入本节课主题。
可演示“哑人说话机”之类的

### 课堂讲解： （70分钟）

**教学提纲：**

- 前篇：认识摄像头
    - 认识摄像头、连接摄像头
    - 任务1：用摄像头拍一张照片
    - 扩展任务：命令行拍摄照片
    - 任务2：用摄像头拍摄视频  
- 后篇：文字识别
    - 扩展任务：将拍摄的照片发送至微信（可仅演示）  
    - 了解文字识别的工作原理 
    - 任务3：识别图片上的文字

**授课内容**：详见下文“讲义”部分。
    
### 总结与点评（5分钟）

*(回顾课程知识点，根据情况提问。如果有学生作品，邀请学生上台演示、讲解。)*

思考题：

## 讲义 *(完整授课内容和补充知识)*

### 认识摄像头

摄像头(CAMERA或WEBCAM)又称为电脑相机、电脑眼、电子眼等，是一种视频输入设备，被广泛的运用于视频会议，远程医疗及实时监控等方面。

<div align="center">
    <img src="/media/15603076322289.jpg">
</div>

 
摄像头一般具有视频摄像/传播和静态图像捕捉等基本功能，它是借由镜头采集图像后，由摄像头内的感光组件电路及控制组件对图像进行处理并转换成电脑所能识别的数字信号，然后借由并行端口或USB连接输入到电脑后由软件再进行图像还原。

- 摄像头能干什么？

<div align="center">
    <img src="/media/15603075292054.jpg">
</div>

- 树莓派摄像头

<div align="center">
    <img src="/media/15603078908161.jpg">
</div>

- 和树莓派连接

摄像头使用软排线进行连接软排线，90度垂直插入连接接口。接口位置如图所示，在HDMI口旁边。连接时触点一侧朝向HDMI接口。

**注意：摄像头不支持热插拔，连接后需要重启。**

<div align="center">
    <img src="/media/15603082233351.jpg">
</div>

- 摄像头相关积木

<div align="center">
    <img src="/media/15603106869342.jpg">
</div>


### 任务一：拍摄图片

拍摄积木的返回是一个暂存图片的路径，可通过输出调试信息查看。

<div align="center">
    <img src="/media/15603103517840.jpg">
</div>

平台还提供了预览图片的功能，可以利用“输出图片到网页”的功能。

### 扩展任务：命令行拍摄

*注意，如果之前在网页端使用过摄像头，用命令行使用前需要先在网页端关闭摄像头。*

打开终端或远程连接至终端，使用命令行执行拍照

```
raspistill -o image.jpg
```

如果远程登录，需要关闭预览窗口才可以：

<!-- 远程登录用户名 pi，密码 1 -->

```
raspistill -n -o temp2.jpg
```

更多的 raspistill 命令参数如下：

<div align="center">
    <img src="/media/15603169261084.jpg">
</div>

可自行尝试多种拍摄方式。

### 任务二：拍摄视频

体验两种拍摄积木的使用。
一种是直接在网页预览，一种是保存为视频文件。

<div align="center">
    <img src="/media/15603183017132.jpg">
</div>

保存的视频文件可用任何视频播放器播放。

扩展知识：常见视频格式 MPEG、MP4、AVI、MKV……

### 文字识别的原理

OCR（Optical Character Recognition） 技术，中文名称是光学字符识别。通俗的说法就是文字识别。

 
文字识别的原理是计算机对图像进行版面分析、处理和识别。这个过程一般包括图像输入、预处理等，拍照其实就是图像输入的过程，接下来对图片进行二值化处理，例如将彩色图片黑白化，分为更容易识别的前景后景信息。

标准的OCR文字识别系统主要包括图像处理模块、版面分析模块、文字识别模块、文字校对模块和输出模块。

图像处理：去污、去噪、增强、居中、纠偏等工作，提高文字识别率。
版面分析：选定文字区域、语言识别、字符切割等工作
单字识别：对单个文字进行识别，早期有模板匹配的方式，较新的技术以特征提取为主。由于文字的位移，笔画的粗细，断笔，粘连，旋转等因素的影响，都会极大影响特征的提取的难度。
文字校对：对识别结果综合分析、校对
输出：将结果以特定形式和格式输出

文字识别看似不过一个简单的拍照过程，其实中间涉及到非常多的繁琐运算，真正准确的文字识别和语音识别一样，都需要很强大的技术。

### 任务三：用树莓派进行文字识别

我们的平台已经将分析处理和识别的模块进行了封装，所以同学们可以轻松地直接使用。

设计目标：

- 按下按钮触发摄像头拍摄照片并存储在系统中，
- 通过获取图片中的文字信息指令读取拍摄照片内容，
- 然后在Log显示区输出调试信息。

<div align="center">
    <img src="/media/15603202736909.jpg">
</div>

Tips：使用可调焦摄像头可以放大或缩小被拍摄物体。调整合适的焦距可拍出更清晰的文字照片。

## 课件

根据本教学计划和讲义，以及具体授课对象编写。

文件名应为：

`RB18-文字识别.pptx`

