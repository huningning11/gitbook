#yeelight智能小灯积木块区

![](/media/yeelight01.png)

##1.功能描述

###功能简介
* Yeelight智能灯 结合全色温全色域LED照明和蓝牙4.0无线通信技术，在提供基本的照明功能的基础上更提供了通过智能手机远程开关灯，调节色彩，亮度的功能。


###连接方法

首先要让Yeelight灯（以下简称灯）接入到局域网，

1.将灯装配到合适的灯座，给灯上电。

2.下载 米家app 进行扫描，如果之前之前连过其他的网络，切换到新的局域网后，需要先将灯初始化，将电源开关连续开关5次，每次持续约2s，就会看到灯开始持续彩虹颜色的变换，最后变为白光。然后再在米家app进行扫描，如果扫描不到设备，可以再次按照上述步骤再初始化一次（有时候一次初始化可能导致扫描不到设备，两次一般就可以），再次进行扫描。（米家会提示你这么操作的）

3.设备扫描到后，就会进行连接。最后连接成功，可以用米家app进行控制了。

4.当米家app能够控制灯正常使用时，证明灯安装成功且接入与手机相同的局域网，接下来我们就可以通过调用积木来控制灯实现不同的效果。

5.调用积木块获取灯的ip地址，若可以获取地址则证明灯与电脑匹配成功。

![](/media/Yeelight2.png)


###积木块说明

![](/media/yeelight02.png)

功能简介：当灯正常连接上局域网后，通过调用此积木块获取灯的ip地址以方便后续的控制；

返回值：灯的ip地址，数据类型为列表（字符串）
***
![](/media/yeelight03.png)

功能简介：输入获取的灯的ip地址，创建相应的变量灯的实例；

参数一：输入获取的ip地址；
***
![](/media/yeelight04.png)

功能简介：打开或关上相应的灯；

参数一：选择打开或关闭；

参数二：选择需要控制的灯；
***
![](/media/yeelight05.png)

功能简介：设置灯的颜色；

参数一：选择需要控制的灯；

参数二：选择灯输出的颜色（本质是通过控制输出RGB的参数来控制灯的颜色）；
***
![](/media/yeelight06.png)

功能简介：控制灯输出不同的特效；

参数一：选择需要控制的灯；

参数二：选择灯的特效，有迪斯科效果，频闪效果，不同颜色频闪效果和警灯效果；

参数三：选择特效需要重复的次数，数据类型：整型（数字）；
***
![](/media/yeelight07.png)

功能简介：控制灯停止输出特效；

参数一：选择需要控制的灯；
***
![](/media/yeelight08.png)

功能简介：获取灯的参数（亮度，颜色，开关）；

参数一：选择需要控制的灯；

参数二：选择需要获取的参数；

返回值：根据选择的需要获取的参数类型返回不同类型的值；

选择亮度时，返回亮度值，数据类型：数字；

选择颜色时，返回RGB，数据类型：列表（数字）；

选择开关时，返回0或1，0表示灯关闭，1表示灯打开，数据类型：整型（数字）；
***
![](/media/yeelight09.png)

功能简介：控制灯的开关状态反转（将关闭的灯打开或将打开的灯关闭）；

参数一：选择需要控制的灯；
***
![](/media/yeelight10.png)

功能简介：控制灯的亮度（只有灯打开的情况下，该积木才会生效）；

参数一：选择需要控制的灯；

参数二：输入灯需要显示的亮度,范围1-100，数据类型：整型（数字）。
###积木块应用
<div align="center">
    <img src="/media/yeelight11.png" alt="图1" width="538">
    <h4>（图1）控制yeelight灯开关</h4>
</div>  

<div align="center">
    <img src="/media/yeelight12.png" alt="图2" width="538">
    <h4>（图2）控制yeelight灯显示特效</h4>
</div>  

##2.案例代码下载
* <a href="../download/积木块说明案例源代码/yeelightanli1.txt" download="" target="_blank">控制yeelight灯开关</a>
* <a href="../download/积木块说明案例源代码/yeelightanli2.txt" download="" target="_blank">控制yeelight灯显示特效</a>